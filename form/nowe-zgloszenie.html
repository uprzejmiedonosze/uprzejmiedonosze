<?PHP
require_once(__DIR__ . '/../inc/include.php');
genHeader("Uprzejmie Donoszę – nowe zgłoszenie", true);

$applicationId = guidv4();

?>
	<body class="index new-notification">
		<div data-role="page" class="container-fluid" data-theme="a">
			<div data-role="header" data-position="fixed" data-tap-toggle="false" data-hide-during-focus="false">
				<? menuBack(); ?>
				<h1>Nowe zgłoszenie</h1>
				<a id="form-submit" class="ui-btn-right ui-alt-icon ui-nodisc-icon ui-btn ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-action">Zgłoś</a>
			</div>
			<div data-role="main" class="ui-content">
				<form action="/potwierdz.html" id="form" method="post" data-ajax="false">
					<input type="hidden" name="applicationId" id="applicationId" value="<?=$applicationId ?>"/>
					<div>
						<label class="section">Dane zgłoszenia</label>
						<div class="ui-grid-a ui-responsive" id="pics">
							<div class="ui-block-a">
								<div class="image-upload">
									<label for="contextImage">
										Zrób zdjęcie prezentujące kontekst zgłoszenia<br>
										<img id="contextImage-img" src="img/camera.png"/>
									</label>
									<input type="file" accept="image/jpeg" id="contextImage" title="Zdjęcie przedstawiające kontekst"/>
								</div>
							</div>
							<div class="ui-block-b">
								<div class="image-upload">
									<label for="carImage">
										Zrób zdjęcie na którym widoczna jest tablica rejestracyjna<br>
										<img id="carImage-img" src="img/camera.png"/><br/>
										<img id="plateImage" src=""/><br/>
										<span id="recydywa"></span>
									</label>
									<input type="file" accept="image/jpeg" id="carImage" title="Zdjęcie przedstawiające samochód tablice rejestracyjne"/>
								</div>
							</div>
						</div>

						<input type="hidden" id="datetime" name="datetime"/>

						<label for="address">Podaj miejsce zgłoszenia <a href="#" id="geocomplete">(pobierz adres)</a></label>
						<div class="combo">
							<input type="text" maxlength="70" required id="address" name="address" placeholder="Miejsce zgłoszenia" data-inline="true">
							<a id="geo" data-role="button" data-icon="location" data-iconpos="notext" data-mini="true" data-inline="true" data-corners="true" data-shadow="false" data-iconshadow="false" data-wrapperels="span" data-theme="b" title="GPS"></a>
						</div>

						<input type="hidden" id="street_number" name="street_number"/>
						<input type="hidden" id="route" name="street_name"/>
						<input type="hidden" id="locality" name="city"/>
						<input type="hidden" id="administrative_area_level_1" name="voivodeship">
						<input type="hidden" id="country" name="country"/>
						<input type="hidden" id="latlng" name="latlng" value=""/>

						<label for="plateId">Podaj numer rejestracyjny pojazdu który dokonał naruszenia</label>
						<input class=“required” type="text" id="plateId" name="plateId" placeholder="Numer rejestracyjny">

						<label for="comment">Dodaj (opcjonalny) komentarz</label>
						<textarea type="text" id="comment" name="comment" placeholder="Np. szczegóły dotyczące lokalizacji"></textarea>

						<label for="category" class="section">Podaj rodzaj naruszenia</label>

						<div class="ui-grid-a ui-responsive" id="category">
							<? $i = 0; foreach($categories as $catId => $catName) { ?>
							<div class="ui-block-<? echo($categoriesMatrix[$i % 2]); ?>">
								<input type="radio" name="category" value="<?=$catId ?>" id="<?=$catId ?>" <? echo ($catId == 0)?' checked="checked" ': '';?>>
								<label for="<?=$catId ?>">
									<img src="img/<?=$catId ?>.jpg">
									<p><?=$catName ?></p>
								</label>
							</div>
							<? $i++; } ?>
						</div>

					</div> <!-- ui-field-contain -->
				</form>
			</div> <!-- main -->
			<script src="js/exif.js?v=%JS_HASH%"></script>
<? getFooter('initAutocompleteOnNewApplication') ?>
