<? 
date_default_timezone_set('Europe/Warsaw');
require_once(__DIR__ . '/../autoload.php');
require_once(__DIR__ . '/../inc/include.php');
genHeader();

$signInSuccessUrl = $_GET['signInSuccessUrl'];
if(isset($$signInSuccessUrl)){
    $signInSuccessUrl = "https://%HOST%/$signInSuccessUrl";
}else{
    $signInSuccessUrl = 'https://%HOST%/start.html';
}
?>
<body class="index">
	<div data-role="page" class="container-fluid" data-theme="a">
		<div data-role="header" data-position="fixed" data-tap-toggle="false">
        <a href="javascript:history.back()" data-rel="back" class="ui-btn-left  ui-alt-icon ui-nodisc-icon ui-btn ui-corner-all ui-icon-carat-l ui-btn-icon-notext" data-role="button" role="button">Back</a>
			<h1>Login</h1>
		<a href="start.html" class="ui-btn-right ui-alt-icon ui-nodisc-icon ui-btn ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-plus">Zgłoś</a>
		</div>
		<div data-role="main" class="ui-content">
			<div class="ui-body ui-body-a ui-corner-all">
                <div id="firebaseui-auth-container"></div>
			</div>
        </div> <!-- main -->
        <script src="https://www.gstatic.com/firebasejs/ui/2.5.1/firebase-ui-auth__pl.js"></script>
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/2.5.1/firebase-ui-auth.css" />
        <script type="text/javascript">
            // FirebaseUI config.
            var uiConfig = {
                signInSuccessUrl: '<?=$signInSuccessUrl?>',
                signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],
                tosUrl: 'https://staging.uprzejmiedonosze.net/start.html' // Terms of service url.
            };

            // Initialize the FirebaseUI Widget using Firebase.
            var ui = new firebaseui.auth.AuthUI(firebase.auth());
            // The start method will wait until the DOM is loaded.
            ui.start('#firebaseui-auth-container', uiConfig);
        </script>
<? getFooter() ?>