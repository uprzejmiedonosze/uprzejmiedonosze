<? 
require_once(__DIR__ . '/../inc/include.php');

try{ 
    $user = $storage->getCurrentUser();
    $email = $user->data->email;
    $name = $user->data->name;
}catch(Exception $e){
    $user = null;
    $email = $_SESSION['user_email'];
    $name = $_SESSION['user_name'];
}

generate('register.html.twig', 
    [
        'head' =>
        [
            'title' => "Zarejestruj się",
            'shortTitle' => "Zarejestruj się",
            'mapsInitFunc' => 'initAutocompleteOnRegister'
        ],
        'config' =>
        [
            'auth' => true,
            'register' => true,
            'email' => $email,
            'name' => $name,
            'signInSuccessUrl' => $_GET['next']
        ],
        'user' => $user
    ]
);
?>
