<? 
require_once(__DIR__ . '/../inc/include.php');

checkIfLogged();

try{ 
    $user = $storage->getCurrentUser();
}catch(Exception $e){
    $user = new User();
    $storage->saveUser($user);
}

echo generate('register.html.twig', 
    [
        'head' =>
        [
            'title' => "Zarejestruj się",
            'shortTitle' => "Zarejestruj się",
            'mainClass' => 'register'
        ],
        'config' =>
        [
            'auth' => true,
            'register' => true,
            'signInSuccessUrl' => isset($_GET['next'])? $_GET['next']: 'start.html',
            'menu' => 'register',
            'isRegistered' => $user->isRegistered()
        ],
        'user' => $user
    ]
);
?>
