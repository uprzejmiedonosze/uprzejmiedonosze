<? 
require_once(__DIR__ . '/../inc/include.php');

$smAddresses = $SM_ADDRESSES;

$smNames = array_map(function ($sm) { return $sm->city; }, $SM_ADDRESSES);
$collator = new Collator('pl_PL');
$collator->sort($smNames);

$smNames = array_unique($smNames, SORT_LOCALE_STRING);

$SMHints = array();
foreach ($smAddresses as $sm) {
    if($sm->hint){
        if(!str_starts_with($sm->hint, 'Miejscowość ')) {
            $SMHints[$sm->city] = $sm->hint;
        }
    }
}
$sortedSMHints = array_unique($SMHints, SORT_LOCALE_STRING);

echo generate('faq.html.twig', 
    [
        'head' =>
        [
            'title' => "Najczęściej zadawane pytania",
            'shortTitle' => "FAQ",
            'description' => "Najczęście zadawane pytania w podziale na miasta",
            'dialog' => isset($_GET['dialog']),
            'mainClass' => 'faq'
        ],
        'config' => [
            'menu' => 'faq',
            'smAddresses' => implode(', ', $smNames),
            'SMHints' => $SMHints
        ]
    ]
);
?>