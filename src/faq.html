<? 
require_once(__DIR__ . '/../inc/include.php');

$smAddresses = $SM_ADDRESSES;
ksort($smAddresses);

$sortedSMs = array();
foreach ($smAddresses as $sm) {
    if($sm->email){
        array_push($sortedSMs, $sm->city);
    }
}
$sortedSMs = array_unique($sortedSMs, SORT_LOCALE_STRING);

$SMHints = array();
foreach ($smAddresses as $sm) {
    if($sm->hint){
        if(!str_starts_with($sm->hint, 'Miejscowość ')) {
            $SMHints[$sm->city] = $sm->hint;
        }
    }
}
$sortedSMHints = array_unique($SMHints, SORT_LOCALE_STRING);

echo generate('faq.html.twig', 
    [
        'head' =>
        [
            'title' => "Najczęściej zadawane pytania",
            'shortTitle' => "FAQ",
            'description' => "Najczęście zadawane pytania w podziale na miasta",
            'dialog' => isset($_GET['dialog']),
            'mainClass' => 'faq'
        ],
        'config' => [
            'menu' => 'faq',
            'smAddresses' => implode(', ', $sortedSMs),
            'SMHints' => $SMHints
        ]
    ]
);
?>